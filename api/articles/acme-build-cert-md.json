{"title":"acme_build_cert.md","slug":"acme-build-cert-md","date":"2021-11-01T03:32:00.000Z","updated":"2021-11-01T07:53:58.524Z","comments":true,"excerpt":"","content":"<h1 id=\"acme-sh-build-certification\"><a href=\"#acme-sh-build-certification\" class=\"headerlink\" title=\"acme.sh build certification\"></a>acme.sh build certification</h1><h2 id=\"env\"><a href=\"#env\" class=\"headerlink\" title=\"env\"></a>env</h2><ul>\n<li>Ubuntu 20.04 LTS</li>\n<li>domain name -&gt; wincher.cn</li>\n</ul>\n<h2 id=\"operations\"><a href=\"#operations\" class=\"headerlink\" title=\"operations\"></a>operations</h2><ul>\n<li>install</li>\n</ul>\n\n    <pre><code class=\"lang-bash\">$ curl https://get.acme.sh | sh\n[M<span class=\"hljs-keyword\">on</span> Nov  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">52</span>:<span class=\"hljs-number\">26</span> CST <span class=\"hljs-number\">2021</span>] Installing <span class=\"hljs-keyword\">from</span> online archive.\n[M<span class=\"hljs-keyword\">on</span> Nov  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">52</span>:<span class=\"hljs-number\">26</span> CST <span class=\"hljs-number\">2021</span>] Downloading https://github.com/acmesh-official/acme.sh/archive/master.tar.gz\n[M<span class=\"hljs-keyword\">on</span> Nov  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">52</span>:<span class=\"hljs-number\">28</span> CST <span class=\"hljs-number\">2021</span>] Extracting master.tar.gz\n[M<span class=\"hljs-keyword\">on</span> Nov  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">52</span>:<span class=\"hljs-number\">28</span> CST <span class=\"hljs-number\">2021</span>] It is recommended <span class=\"hljs-keyword\">to</span> install socat first.\n[M<span class=\"hljs-keyword\">on</span> Nov  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">52</span>:<span class=\"hljs-number\">28</span> CST <span class=\"hljs-number\">2021</span>] We use socat <span class=\"hljs-keyword\">for</span> standalone server if you use standalone mode.\n[M<span class=\"hljs-keyword\">on</span> Nov  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">52</span>:<span class=\"hljs-number\">28</span> CST <span class=\"hljs-number\">2021</span>] If you don't use standalone mode, just ignore this warning.\n[M<span class=\"hljs-keyword\">on</span> Nov  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">52</span>:<span class=\"hljs-number\">28</span> CST <span class=\"hljs-number\">2021</span>] Installing <span class=\"hljs-keyword\">to</span> /home/wincher/.acme.sh\n[M<span class=\"hljs-keyword\">on</span> Nov  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">52</span>:<span class=\"hljs-number\">28</span> CST <span class=\"hljs-number\">2021</span>] Installed <span class=\"hljs-keyword\">to</span> /home/wincher/.acme.sh/acme.sh\n[M<span class=\"hljs-keyword\">on</span> Nov  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">52</span>:<span class=\"hljs-number\">28</span> CST <span class=\"hljs-number\">2021</span>] Installing alias <span class=\"hljs-keyword\">to</span> '/home/wincher/.zshrc'\n[M<span class=\"hljs-keyword\">on</span> Nov  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">52</span>:<span class=\"hljs-number\">28</span> CST <span class=\"hljs-number\">2021</span>] OK, Close and reopen your terminal <span class=\"hljs-keyword\">to</span> start using acme.sh\n[M<span class=\"hljs-keyword\">on</span> Nov  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">52</span>:<span class=\"hljs-number\">28</span> CST <span class=\"hljs-number\">2021</span>] Installing cron job\nno crontab <span class=\"hljs-keyword\">for</span> wincher\nno crontab <span class=\"hljs-keyword\">for</span> wincher\n[M<span class=\"hljs-keyword\">on</span> Nov  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">52</span>:<span class=\"hljs-number\">28</span> CST <span class=\"hljs-number\">2021</span>] Good, bash is found, so change the shebang <span class=\"hljs-keyword\">to</span> use bash as preferred.\n[M<span class=\"hljs-keyword\">on</span> Nov  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">52</span>:<span class=\"hljs-number\">29</span> CST <span class=\"hljs-number\">2021</span>] OK\n[M<span class=\"hljs-keyword\">on</span> Nov  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">10</span>:<span class=\"hljs-number\">52</span>:<span class=\"hljs-number\">29</span> CST <span class=\"hljs-number\">2021</span>] Install success!\n</code></pre>\n\n    <pre><code class=\"lang-bash\">$ acme.sh --issue --domain wincher.cn --standalone\n[<span class=\"hljs-symbol\">Mon</span> <span class=\"hljs-symbol\">Nov</span>  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">11</span>:<span class=\"hljs-number\">17</span>:<span class=\"hljs-number\">49</span> <span class=\"hljs-symbol\">CST</span> <span class=\"hljs-number\">2021</span>] <span class=\"hljs-symbol\">Using</span> <span class=\"hljs-symbol\">CA</span>: https://acme.zerossl.com/v2/<span class=\"hljs-symbol\">DV90</span>\n[<span class=\"hljs-symbol\">Mon</span> <span class=\"hljs-symbol\">Nov</span>  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">11</span>:<span class=\"hljs-number\">17</span>:<span class=\"hljs-number\">49</span> <span class=\"hljs-symbol\">CST</span> <span class=\"hljs-number\">2021</span>] <span class=\"hljs-symbol\">Please</span> install socat tools first.\n[<span class=\"hljs-symbol\">Mon</span> <span class=\"hljs-symbol\">Nov</span>  <span class=\"hljs-number\">1</span> <span class=\"hljs-number\">11</span>:<span class=\"hljs-number\">17</span>:<span class=\"hljs-number\">49</span> <span class=\"hljs-symbol\">CST</span> <span class=\"hljs-number\">2021</span>] <span class=\"hljs-symbol\">_on_before_issue</span>.\n</code></pre>\n<ul>\n<li><p>go install <a href=\"http://www.dest-unreach.org/socat/\" target=\"_blank\" rel=\"external\">socat</a></p>\n\n    <pre><code class=\"lang-bash\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> sudo apt install -y socat</span>\n</code></pre>\n</li>\n<li><p>issue again</p>\n\n    <pre><code class=\"lang-bash\">$ acme.sh --issue --standalone -d wincher.cn\n[<span class=\"hljs-meta\">Mon Nov  1 12:39:01 CST 2021</span>] Using CA: https:<span class=\"hljs-comment\">//acme.zerossl.com/v2/DV90</span>\n[<span class=\"hljs-meta\">Mon Nov  1 12:39:01 CST 2021</span>] Standalone mode.\n[<span class=\"hljs-meta\">Mon Nov  1 12:39:01 CST 2021</span>] LISTEN    <span class=\"hljs-number\">0</span>         <span class=\"hljs-number\">511</span>                      *:<span class=\"hljs-number\">80</span>                     *:*\n[<span class=\"hljs-meta\">Mon Nov  1 12:39:01 CST 2021</span>] tcp port <span class=\"hljs-number\">80</span> <span class=\"hljs-keyword\">is</span> already used <span class=\"hljs-keyword\">by</span>\n[<span class=\"hljs-meta\">Mon Nov  1 12:39:01 CST 2021</span>] Please stop it first\n[<span class=\"hljs-meta\">Mon Nov  1 12:39:01 CST 2021</span>] _on_before_issue.\n</code></pre>\n<p>we can see that this operation will use your severâ€™s port:80, then and my server just run a application that use 80 port, so I stop it.</p>\n</li>\n<li><p>issue again</p>\n<pre><code>\n</code></pre></li>\n</ul>\n","categories":[],"tags":[]}